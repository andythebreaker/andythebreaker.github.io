doctype html
html
  head
    title #{ title }
    meta(charset='UTF-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(name='viewport' content='width=device-width, initial-scale=1')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js')
    script(src='https://cdn.jsdelivr.net/jquery/1.11.1/jquery.min.js')
    script(src='https://cdn.jsdelivr.net/lodash/2.4.1/lodash.js')
    script(src='https://cdn.jsdelivr.net/bootstrap/3.2.0/js/bootstrap.min.js')
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/bootstrap/3.2.0/css/bootstrap.css')
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/highlight.js/9.1.0/styles/github.min.css')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/markdown-it/12.2.0/markdown-it.js' integrity='sha512-ivJskyHEWoa1WrFlVDWM7o8I7ZKt2dF97kUVMKHT4CPSWxZ7VHuCydjiED3pjOpN0WuT2XA3pK4HrZYNsZ4OqA==' crossorigin='anonymous' referrerpolicy='no-referrer')
    script(src='https://twemoji.maxcdn.com/twemoji.min.js')
    link(rel='stylesheet' href='/md/index.css')
    script(src='/md/index.js')
    // Ancient IE support - load shiv & kill broken highlighter
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      script.
        window.hljs = null;
    // GA counter
    //script.
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-26895916-4', 'auto');
      ga('require', 'displayfeatures');
      ga('require', 'linkid', 'linkid.js');
      ga('send', 'pageview');
  body
    //this page is copied from https://markdown-it.github.io/
    nav.navbar.navbar-default
      .container-fluid
        // Brand and toggle get grouped for better mobile display
        .navbar-header
          button.navbar-toggle.collapsed(type='button' data-toggle='collapse' data-target='#bs-example-navbar-collapse-1' aria-expanded='false')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#') 純文字編輯器
        // Collect the nav links, forms, and other content for toggling
        #bs-example-navbar-collapse-1.collapse.navbar-collapse
          ul.nav.navbar-nav
            //li.active
              a(href='#')
                | Link 
                span.sr-only (current)
            li
              a#alpha(href=`/main/link?delOLDid=${delOLDid}&ic=${req_query_ic}&lid=${req_query_id}&`) 送出
            //li.dropdown
              a.dropdown-toggle(href='#' data-toggle='dropdown' role='button' aria-haspopup='true' aria-expanded='false')
                | Dropdown 
                span.caret
              ul.dropdown-menu
                li
                  a(href='#') Action
                li
                  a(href='#') Another action
                li
                  a(href='#') Something else here
                li.divider(role='separator')
                li
                  a(href='#') Separated link
                li.divider(role='separator')
                li
                  a(href='#') One more separated link
          form.navbar-form.navbar-left
            .form-group
              input.form-control(type='text' placeholder='Search' disabled='' value='你必須先預覽才能送出!')
            button#sendmd.btn.btn-default(type='submit') 預覽(新分頁中開啟)
          ul.nav.navbar-nav.navbar-right
            //li
              a(href='#') 預覽(新分頁中開啟)
            //li
              a(href='#') Link
            li.dropdown
              a.dropdown-toggle(href='#' data-toggle='dropdown' role='button' aria-haspopup='true' aria-expanded='false')
                | 進階選項 
                span.caret
              ul.dropdown-menu
                li
                  a(href='#' onclick="var tmp=document.getElementsByClassName('childdisappear');if(tmp[1].style.display!=='none'){tmp[1].style.display='none';tmp[0].style.display='block';}else{tmp[0].style.display='none';tmp[1].style.display='block';}") [顯示/關閉]即時預覽進階選項
                li
                  a(href='#' onclick="var tmp=document.getElementsByClassName('demo-control');for(var i=0;i<tmp.length;i++){tmp[i].style.display=tmp[i].style.display==='none'?'block':'none';}") [顯示/關閉]編輯器除錯選項
                //li
                  a(href='#') Something else here
                li.divider(role='separator')
                li
                  a#mddocid(href='#') 尚未提交...
        // /.navbar-collapse
        // /.container-fluid
    .container
      //h1 #{ topic }
        small #{ topic_small }
      //.input-group
        span#basic-addon3.input-group-addon https://example.com/users/
        input#basic-url.form-control(type='text' aria-describedby='basic-addon3')
      .row.childdisappear
        h3.col-md-3 編輯器
        h3.col-md-6 刪除左方編輯器中的既有內容並擅打所需文字
        h3.col-md-3 即時預覽
      .childdisappear.form-inline.demo-options(style="display:none;")
        .checkbox.not-strict
          label._tip(title='enable html tags in source text')
            input#html(type='checkbox')
            |  html
        .checkbox.not-strict
          label._tip(title='produce xtml output (add / to single tags (<br /> instead of <br>)')
            input#xhtmlOut(type='checkbox')
            |  xhtmlOut
        .checkbox.not-strict
          label._tip(title='newlines in paragraphs are rendered as <br>')
            input#breaks(type='checkbox')
            |  breaks
        .checkbox.not-strict
          label._tip(title='autoconvert link-like texts to links')
            input#linkify(type='checkbox')
            |  linkify
        .checkbox.not-strict
          label._tip(title='do typographic replacements, (c) → © and so on')
            input#typographer(type='checkbox')
            |  typographer
        .checkbox.not-strict
          label._tip(title='enable output highlight for fenced blocks')
            input#_highlight(type='checkbox')
            |  highlight
        .form-group.not-strict
          input#langPrefix.form-control._tip(type='input' placeholder='language prefix' title='css class language prefix for fenced code blocks')
        .checkbox
          label._tip(title='force strict CommonMark mode - output will be equal to reference parser')
            input#_strict(type='checkbox')
            |  CommonMark strict
    .container.full-height
      .row.full-height
        .col-xs-6.full-height
          .demo-control(style="display:none;")
            a.source-clear(href='#') clear
            a#permalink(href='./' title='Share this snippet as link')
              strong permalink
          //if defaultMDtextValue
            textarea.source.full-height=defaultMDtextValue
          //else
          //^^^^^^^^^^算了這個功能不做了
          if !defaultvalue
            textarea.source.full-height
              | ---
              | __Advertisement :)__
              | - __[pica](https://nodeca.github.io/pica/demo/)__ - high quality and fast image
              | resize in browser.
              | - __[babelfish](https://github.com/nodeca/babelfish/)__ - developer friendly
              | i18n with plurals support and easy syntax.
              | You will like those projects!
              | ---
              | # h1 Heading 8-)
              | ## h2 Heading
              | ### h3 Heading
              | #### h4 Heading
              | ##### h5 Heading
              | ###### h6 Heading
              | ## Horizontal Rules
              | ___
              | ---
              | ***
              | ## Typographic replacements
              | Enable typographer option to see result.
              | (c) (C) (r) (R) (tm) (TM) (p) (P) +-
              | test.. test... test..... test?..... test!....
              | !!!!!! ???? ,,  -- ---
              | "Smartypants, double quotes" and 'single quotes'
              | ## Emphasis
              | **This is bold text**
              | __This is bold text__
              | *This is italic text*
              | _This is italic text_
              | ~~Strikethrough~~
              | ## Blockquotes
              | > Blockquotes can also be nested...
              | >> ...by using additional greater-than signs right next to each other...
              | > > > ...or with spaces between arrows.
              | ## Lists
              | Unordered
              | + Create a list by starting a line with `+`, `-`, or `*`
              | + Sub-lists are made by indenting 2 spaces:
              | - Marker character change forces new list start:
              | * Ac tristique libero volutpat at
              | + Facilisis in pretium nisl aliquet
              | - Nulla volutpat aliquam velit
              | + Very easy!
              | Ordered
              | 1. Lorem ipsum dolor sit amet
              | 2. Consectetur adipiscing elit
              | 3. Integer molestie lorem at massa
              | 1. You can use sequential numbers...
              | 1. ...or keep all the numbers as `1.`
              | Start numbering with offset:
              | 57. foo
              | 1. bar
              | ## Code
              | Inline `code`
              | Indented code
              | // Some comments
              | line 1 of code
              | line 2 of code
              | line 3 of code
              | Block code "fences"
              | ```
              | Sample text here...
              | ```
              | Syntax highlighting
              | ``` js
              | var foo = function (bar) {
              | return bar++;
              | };
              | console.log(foo(5));
              | ```
              | ## Tables
              | | Option | Description |
              | | ------ | ----------- |
              | | data   | path to data files to supply the data that will be passed into templates. |
              | | engine | engine to be used for processing templates. Handlebars is the default. |
              | | ext    | extension to be used for dest files. |
              | Right aligned columns
              | | Option | Description |
              | | ------:| -----------:|
              | | data   | path to data files to supply the data that will be passed into templates. |
              | | engine | engine to be used for processing templates. Handlebars is the default. |
              | | ext    | extension to be used for dest files. |
              | ## Links
              | [link text](http://dev.nodeca.com)
              | [link with title](http://nodeca.github.io/pica/demo/ "title text!")
              | Autoconverted link https://github.com/nodeca/pica (enable linkify to see)
              | ## Images
              | ![Minion](https://octodex.github.com/images/minion.png)
              | ![Stormtroopocat](https://octodex.github.com/images/stormtroopocat.jpg "The Stormtroopocat")
              | Like links, Images also have a footnote style syntax
              | ![Alt text][id]
              | With a reference later in the document defining the URL location:
              | [id]: https://octodex.github.com/images/dojocat.jpg  "The Dojocat"
              | ## Plugins
              | The killer feature of `markdown-it` is very effective support of
              | [syntax plugins](https://www.npmjs.org/browse/keyword/markdown-it-plugin).
              | ### [Emojies](https://github.com/markdown-it/markdown-it-emoji)
              | > Classic markup: :wink: :crush: :cry: :tear: :laughing: :yum:
              | >
              | > Shortcuts (emoticons): :-) :-( 8-) ;)
              | see [how to change output](https://github.com/markdown-it/markdown-it-emoji#change-output) with twemoji.
              | ### [Subscript](https://github.com/markdown-it/markdown-it-sub) / [Superscript](https://github.com/markdown-it/markdown-it-sup)
              | - 19^th^
              | - H~2~O
              | ### [\<ins>](https://github.com/markdown-it/markdown-it-ins)
              | ++Inserted text++
              | ### [\<mark>](https://github.com/markdown-it/markdown-it-mark)
              | ==Marked text==
              | ### [Footnotes](https://github.com/markdown-it/markdown-it-footnote)
              | Footnote 1 link[^first].
              | Footnote 2 link[^second].
              | Inline footnote^[Text of inline footnote] definition.
              | Duplicated footnote reference[^second].
              | [^first]: Footnote **can have markup**
              | and multiple paragraphs.
              | [^second]: Footnote text.
              | ### [Definition lists](https://github.com/markdown-it/markdown-it-deflist)
              | Term 1
              | :   Definition 1
              | with lazy continuation.
              | Term 2 with *inline markup*
              | :   Definition 2
              | { some code, part of Definition 2 }
              | Third paragraph of definition 2.
              | _Compact style:_
              | Term 1
              | ~ Definition 1
              | Term 2
              | ~ Definition 2a
              | ~ Definition 2b
              | ### [Abbreviations](https://github.com/markdown-it/markdown-it-abbr)
              | This is HTML abbreviation example.
              | It converts "HTML", but keep intact partial entries like "xxxHTMLyyy" and so on.
              | *[HTML]: Hyper Text Markup Language
              | ### [Custom containers](https://github.com/markdown-it/markdown-it-container)
              | ::: warning
              | *here be dragons*
              | :::
          else  
            textarea.source.full-height=defaultvalue
        section.col-xs-6.full-height
          .demo-control(style="display:none;")
            a(href='#' data-result-as='html') html
            a(href='#' data-result-as='src') source
            a(href='#' data-result-as='debug') debug
          .result-html.full-height
          pre.hljs.result-src.full-height.
          pre.hljs.result-debug.full-height.
    //.gh-ribbon
      a(href='https://github.com/markdown-it/markdown-it' target='_blank') Fork me on GitHub
    script(src='/md/communication.js')